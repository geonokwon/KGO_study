# 영속성 컨텍스트

- 영속성 컨텍스트란, 테이블과 매핑된 Entity 객체를 관리/보관하는 역할을 수행한다.
- 스프링에서는 트랜잭션을 사용하면 영속성 컨텍스트가 생겨나고, 트랜잭션이 종료되면 영속성 컨텍스트가 종료된다. 또한, 영속성 컨텍스트는 특별한 능력을 4가지 가지고 있다.
    
    1. ==변경 감지 (Dirty Check)== - 영속성 컨텍스트 안에서 불러와진 Entity는 명시적으로 save 를 해주지 않더라도 알아서 변경을 감지하여 저장할 수 있게 해준다.
    2. ==쓰기 지연== - 영속성 컨텍스트에 의해 트랜잭션이 commit 되는 시점에 SQL을 모아서 한 번만 날리게 된다.
    
    ![[Untitled 11 2.png|Untitled 11 2.png]]
    
    ![[Untitled 12 2.png|Untitled 12 2.png]]
    
      
    
    1. ==1차 캐싱==
    
    ![[Untitled 13 2.png|Untitled 13 2.png]]
    
    1. ==지연 로딩==
        - 필요한 순간에 가져오고 필요하지 않다면 영원히 가져오지 않을것임.
        - 연결되어 있는 객체를 지연 로딩한 이유는 fetch옵션 떄문이다.
        - fetch 옵션은 2가지 종류가 있다.
        - 지금처럼 꼭 필요할 때 가져오는 ==LAZY== 옵션
        - 처음 데이터를 로딩할 때 바로 가져오는 ==EAGER== 옵션
